<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼 | 쌍팔년생 개발자</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="blog, react, typescript, frontend, development, 프론트엔드, 개발자, 쌍팔년생"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="theme-color" content="#3182ce"><meta data-rh="true" name="author" content="쌍팔년생 개발자"><meta data-rh="true" property="og:locale" content="ko_KR"><meta data-rh="true" property="google-adsense-account" content="ca-pub-2736486222426506"><meta data-rh="true" property="og:title" content="Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼 | 쌍팔년생 개발자"><meta data-rh="true" name="description" content="Supabase는 PostgreSQL 기반의 오픈소스 백엔드 플랫폼으로, Firebase의 강력한 대안입니다. 실시간 데이터베이스, 인증, 스토리지, Edge Functions까지 한 번에 해결하는 방법을 소개합니다."><meta data-rh="true" property="og:description" content="Supabase는 PostgreSQL 기반의 오픈소스 백엔드 플랫폼으로, Firebase의 강력한 대안입니다. 실시간 데이터베이스, 인증, 스토리지, Edge Functions까지 한 번에 해결하는 방법을 소개합니다."><meta data-rh="true" property="og:image" content="https://jypark.pe.kr/img/hero/supabase-guide.webp"><meta data-rh="true" name="twitter:image" content="https://jypark.pe.kr/img/hero/supabase-guide.webp"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-05-30T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/jeongyong-park"><meta data-rh="true" property="article:tag" content="supabase,firebase,postgresql,backend,database,realtime"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative"><link data-rh="true" rel="alternate" href="https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative" hreflang="ko"><link data-rh="true" rel="alternate" href="https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative","mainEntityOfPage":"https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative","url":"https://jypark.pe.kr/blog/supabase-complete-guide-firebase-alternative","headline":"Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼","name":"Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼","description":"Supabase는 PostgreSQL 기반의 오픈소스 백엔드 플랫폼으로, Firebase의 강력한 대안입니다. 실시간 데이터베이스, 인증, 스토리지, Edge Functions까지 한 번에 해결하는 방법을 소개합니다.","datePublished":"2025-05-30T00:00:00.000Z","author":{"@type":"Person","name":"Jeongyong Park","description":"쌍팔년생 개발자","url":"https://github.com/jeongyong-park","email":"kladess@gmail.com","image":"https://github.com/jeongyong-park.png"},"image":{"@type":"ImageObject","@id":"https://jypark.pe.kr/img/hero/supabase-guide.webp","url":"https://jypark.pe.kr/img/hero/supabase-guide.webp","contentUrl":"https://jypark.pe.kr/img/hero/supabase-guide.webp","caption":"title image for the blog post: Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://jypark.pe.kr/blog","name":"블로그"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="쌍팔년생 개발자 블로그 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="쌍팔년생 개발자 블로그 Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="쌍팔년생 개발자 블로그 JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NKGGKDML9T"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-NKGGKDML9T",{anonymize_ip:!0})</script>




<link rel="icon" href="/img/favicon-32x32.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#3182ce">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
<link rel="mask-icon" href="/img/logo.svg" color="#3182ce">
<meta name="msapplication-TileImage" content="/img/logo-192.png">
<meta name="msapplication-TileColor" content="#3182ce">




<meta name="google-adsense-account" content="ca-pub-2736486222426506">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/woff2/Pretendard-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/woff2/Pretendard-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/woff2/Pretendard-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
<link rel="dns-prefetch" href="https://googleads.g.doubleclick.net">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
<style>
                /* Critical CSS for CLS prevention */
                body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
                .navbar__title { font-size: 1.25rem; line-height: 1.4; }
                h1, h2, h3 { line-height: 1.4; font-weight: 600; }
                img { height: auto; max-width: 100%; }
                .hero__title { font-size: clamp(1.75rem, 4vw, 3rem); line-height: 1.2; }
            </style>
<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2736486222426506" async crossorigin="anonymous"></script><link rel="stylesheet" href="/assets/css/styles.c43d09a2.css">
<script src="/assets/js/runtime~main.d9f272a9.js" defer="defer"></script>
<script src="/assets/js/main.6b012328.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="https://github.com/jeongyong-park.png"><a href="#main-content" class="skipToContent" style="position:fixed;top:1rem;left:1rem;z-index:9999;transform:translateY(-150%);transition:transform 0.3s ease;background-color:var(--ifm-color-primary);color:var(--ifm-color-primary-contrast-foreground);padding:0.75rem 1.25rem;border-radius:0.5rem;text-decoration:none;font-weight:600;font-size:0.875rem;box-shadow:0 4px 12px rgba(0, 0, 0, 0.15);border:2px solid var(--ifm-color-primary-contrast-background)">본문으로 건너뛰기</a><div class="lcpOptimizer_QYH2"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="메인" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="쌍팔년생 개발자 로고" class="themedComponent_mlkZ themedComponent--light_NVdE" style="height:28px;width:auto;max-width:150px;object-fit:contain"><img src="/img/logo.svg" alt="쌍팔년생 개발자 로고" class="themedComponent_mlkZ themedComponent--dark_xIcU" style="height:28px;width:auto;max-width:150px;object-fit:contain"></div><b class="navbar__title text--truncate">쌍팔년생 개발자</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">블로그</a><a class="navbar__item navbar__link" href="/blog/tags">태그</a><a class="navbar__item navbar__link" href="/bio">소개</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">최근 포스트</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/diffx-next-generation-extensible-diff-format">DiffX: 확장 가능한 차세대 Diff 형식</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/lm-studio-local-ai-guide">LM Studio: 내 PC에서 AI 언어모델을 자유롭게 실행하는 방법</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/csharp-thread-parallel-foreach-safe-cancellation">C#에서 Thread와 Parallel.ForEach 안전하게 중단하는 방법</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/supabase-complete-guide-firebase-alternative">Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tailwind-css-v4-complete-guide">Tailwind CSS v4.0 &amp; v4.1 완전 분석: 성능 혁신과 실전 유틸리티</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/microsoft-typescript-native-go-project-analysis">Microsoft TypeScript Native 프로젝트 분석: Go 기반 성능 혁신의 새로운 전환점</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/uuidv7-postgresql-18">PostgreSQL 18에 UUIDv7이 도입됩니다</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/next-yak-nextjs-css-in-js">next-yak: Next.js를 위한 러스트 기반 Zero-runtime CSS-in-JS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/oklch-color-space-web-design">OKLCH 색상 공간: 웹 디자인의 새로운 표준</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/shell-script-no-such-file-directory-fix">Shell 스크립트 &#x27;No such file or directory&#x27; 오류 완벽 해결법</a></li></ul></div></nav></aside><main class="col col--7"><div class="enhanced-blog-post-item"><article class=""><header><h1 class="title_f1Hy">Supabase 완벽 가이드: Firebase 대안으로 떠오르는 오픈소스 백엔드 플랫폼</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-05-30T00:00:00.000Z">2025년 5월 30일</time> · <!-- -->약 16분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/jeongyong-park" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jeongyong-park.png" alt="Jeongyong Park"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/jeongyong-park" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Jeongyong Park</span></a></div><small class="authorTitle_nd0D" title="쌍팔년생 개발자">쌍팔년생 개발자</small><div class="authorSocials_rSDt"><a href="https://x.com/chisquare88" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="X"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 1200 1227" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf xSvg_y3PF"><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"></path></svg></a><a href="https://github.com/jeongyong-park" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p><img decoding="async" loading="lazy" alt="supabase 완벽 가이드" src="/assets/images/supabase-guide-eea5bf9362e1af4d12fc1ce257ad378e.webp" width="1536" height="1024" class="img_ev3q"></p>
<blockquote>
<p><strong>TL;DR</strong>: <strong>Supabase</strong>는 PostgreSQL 기반의 오픈소스 백엔드 플랫폼으로, Firebase의 완벽한 대안입니다. <strong>실시간 데이터베이스</strong>, <strong>인증 시스템</strong>, <strong>파일 스토리지</strong>, <strong>Edge Functions</strong>를 통합 제공하며, SQL의 강력함과 NoSQL의 편의성을 동시에 제공합니다.</p>
</blockquote>
<p>Supabase는 &quot;오픈소스 Firebase 대안&quot;이라는 슬로건으로 시작해 현재 개발자들 사이에서 가장 주목받는 백엔드 서비스 중 하나로 자리잡았습니다. PostgreSQL을 기반으로 한 견고한 데이터베이스 인프라와 현대적인 개발자 경험을 제공하며, <strong>2백만 명 이상의 개발자</strong>가 사용하고 있는 플랫폼입니다.</p>
<p>특히 <strong>관계형 데이터베이스의 강력함</strong>과 <strong>NoSQL의 편의성</strong>을 동시에 제공하는 독특한 접근 방식으로, Firebase의 한계를 극복하면서도 더 나은 개발자 경험을 제공합니다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supabase란-무엇인가">Supabase란 무엇인가?<a href="#supabase란-무엇인가" class="hash-link" aria-label="Supabase란 무엇인가?에 대한 직접 링크" title="Supabase란 무엇인가?에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="핵심-개념과-철학">핵심 개념과 철학<a href="#핵심-개념과-철학" class="hash-link" aria-label="핵심 개념과 철학에 대한 직접 링크" title="핵심 개념과 철학에 대한 직접 링크">​</a></h3>
<p>Supabase는 2020년에 창립된 회사로, **&quot;The Open Source Firebase Alternative&quot;**라는 명확한 비전을 가지고 시작되었습니다. 하지만 단순한 Firebase 클론이 아닌, <strong>PostgreSQL의 강력함을 기반으로 한 더 나은 백엔드 솔루션</strong>을 제공하는 것이 목표입니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supabase의-핵심-철학">Supabase의 핵심 철학<a href="#supabase의-핵심-철학" class="hash-link" aria-label="Supabase의 핵심 철학에 대한 직접 링크" title="Supabase의 핵심 철학에 대한 직접 링크">​</a></h4>
<ol>
<li><strong>오픈소스 우선</strong>: 모든 핵심 기능이 오픈소스로 제공</li>
<li><strong>SQL 네이티브</strong>: PostgreSQL의 모든 기능을 그대로 활용</li>
<li><strong>개발자 경험 최우선</strong>: 직관적이고 강력한 API 제공</li>
<li><strong>확장성</strong>: 스타트업부터 엔터프라이즈까지 모든 규모 지원</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="firebase와의-차이점">Firebase와의 차이점<a href="#firebase와의-차이점" class="hash-link" aria-label="Firebase와의 차이점에 대한 직접 링크" title="Firebase와의 차이점에 대한 직접 링크">​</a></h3>
<table><thead><tr><th>기능</th><th>Firebase</th><th>Supabase</th></tr></thead><tbody><tr><td><strong>데이터베이스</strong></td><td>NoSQL (Firestore)</td><td>PostgreSQL (관계형)</td></tr><tr><td><strong>쿼리 언어</strong></td><td>제한적 쿼리</td><td>완전한 SQL 지원</td></tr><tr><td><strong>실시간 기능</strong></td><td>실시간 리스너</td><td>PostgreSQL 실시간 구독</td></tr><tr><td><strong>인증</strong></td><td>Firebase Auth</td><td>자체 인증 + 외부 제공자</td></tr><tr><td><strong>스토리지</strong></td><td>Cloud Storage</td><td>S3 호환 스토리지</td></tr><tr><td><strong>함수</strong></td><td>Cloud Functions</td><td>Edge Functions (Deno)</td></tr><tr><td><strong>오픈소스</strong></td><td>부분적</td><td>완전한 오픈소스</td></tr><tr><td><strong>벤더 락인</strong></td><td>높음</td><td>낮음 (PostgreSQL 표준)</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="주요-기능-심화-분석">주요 기능 심화 분석<a href="#주요-기능-심화-분석" class="hash-link" aria-label="주요 기능 심화 분석에 대한 직접 링크" title="주요 기능 심화 분석에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-postgresql-기반-데이터베이스">1. PostgreSQL 기반 데이터베이스<a href="#1-postgresql-기반-데이터베이스" class="hash-link" aria-label="1. PostgreSQL 기반 데이터베이스에 대한 직접 링크" title="1. PostgreSQL 기반 데이터베이스에 대한 직접 링크">​</a></h3>
<p>Supabase의 가장 큰 강점은 <strong>PostgreSQL을 그대로 사용</strong>한다는 점입니다. 이는 단순히 데이터베이스를 제공하는 것을 넘어서, SQL의 모든 강력한 기능을 웹 애플리케이션에서 직접 활용할 수 있게 해줍니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="postgresql의-고급-기능-활용">PostgreSQL의 고급 기능 활용<a href="#postgresql의-고급-기능-활용" class="hash-link" aria-label="PostgreSQL의 고급 기능 활용에 대한 직접 링크" title="PostgreSQL의 고급 기능 활용에 대한 직접 링크">​</a></h4>
<div class="language-sql codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">복잡한 쿼리 예시</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">-- 복잡한 조인과 집계 쿼리</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  u</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> post_count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">likes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> avg_likes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  RANK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">OVER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DESC</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> author_rank</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> users u</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> posts p </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> u</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author_id</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> u</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">created_at </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-01-01&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> u</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> u</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">HAVING</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> author_rank</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- JSON 필드 쿼리 (PostgreSQL의 강력한 JSON 지원)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> products</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> metadata</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token string" style="color:#e3116c">&#x27;category&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;electronics&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">metadata</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token string" style="color:#e3116c">&#x27;specifications&#x27;</span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token string" style="color:#e3116c">&#x27;ram&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">::</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 전문 검색 (Full-text Search)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> articles</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> to_tsvector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;english&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      @@ plainto_tsquery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;english&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;javascript performance optimization&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="row-level-security-rls">Row Level Security (RLS)<a href="#row-level-security-rls" class="hash-link" aria-label="Row Level Security (RLS)에 대한 직접 링크" title="Row Level Security (RLS)에 대한 직접 링크">​</a></h4>
<p>Supabase의 보안 모델은 PostgreSQL의 <strong>Row Level Security</strong>를 기반으로 합니다. 이를 통해 데이터베이스 레벨에서 세밀한 권한 제어가 가능합니다.</p>
<div class="language-sql codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">RLS 정책 설정</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">-- 사용자는 자신의 게시물만 볼 수 있도록 설정</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Users can view own posts&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 관리자는 모든 게시물을 볼 수 있도록 설정</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Admins can view all posts&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">jwt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;role&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;admin&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 게시물 작성자만 수정 가능</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Users can update own posts&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-실시간-기능-realtime">2. 실시간 기능 (Realtime)<a href="#2-실시간-기능-realtime" class="hash-link" aria-label="2. 실시간 기능 (Realtime)에 대한 직접 링크" title="2. 실시간 기능 (Realtime)에 대한 직접 링크">​</a></h3>
<p>Supabase의 실시간 기능은 PostgreSQL의 <strong>LISTEN/NOTIFY</strong> 메커니즘을 웹소켓으로 확장한 혁신적인 구현입니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="실시간-구독-구현">실시간 구독 구현<a href="#실시간-구독-구현" class="hash-link" aria-label="실시간 구독 구현에 대한 직접 링크" title="실시간 구독 구현에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/realtime.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createClient </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@supabase/supabase-js&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> supabase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NEXT_PUBLIC_SUPABASE_URL</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 특정 테이블의 모든 변경사항 실시간 구독</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">channel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;public:posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;postgres_changes&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// INSERT, UPDATE, DELETE 모든 이벤트</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    table</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Change received!&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 실시간으로 UI 업데이트</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token function" style="color:#d73a49">handlePostChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 특정 조건에 맞는 데이터만 구독</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filteredSubscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">channel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;public:posts:author_id=eq.123&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;postgres_changes&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;INSERT&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    table</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    filter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;author_id=eq.123&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;New post from author 123:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">new</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Presence 기능으로 온라인 사용자 추적</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> presenceChannel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">channel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;online-users&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    presence</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">presenceChannel</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;presence&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;sync&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> presenceChannel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">presenceState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Online users:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;presence&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;join&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newPresences </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;User joined:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newPresences</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;presence&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;leave&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> leftPresences </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;User left:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> leftPresences</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용자 온라인 상태 전송</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">presenceChannel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">track</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  user_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  last_seen</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toISOString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-인증-시스템-auth">3. 인증 시스템 (Auth)<a href="#3-인증-시스템-auth" class="hash-link" aria-label="3. 인증 시스템 (Auth)에 대한 직접 링크" title="3. 인증 시스템 (Auth)에 대한 직접 링크">​</a></h3>
<p>Supabase Auth는 <strong>JWT 기반의 현대적인 인증 시스템</strong>으로, 다양한 인증 방식을 지원합니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="이메일비밀번호-인증">이메일/비밀번호 인증<a href="#이메일비밀번호-인증" class="hash-link" aria-label="이메일/비밀번호 인증에 대한 직접 링크" title="이메일/비밀번호 인증에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/auth.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// 회원가입</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">signUp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user@example.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;securepassword123&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      first_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;John&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      last_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Doe&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 로그인</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">signInWithPassword</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user@example.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;securepassword123&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 로그아웃</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">signOut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 현재 사용자 정보 가져오기</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용자 정보 업데이트</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    first_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Jane&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">28</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="소셜-로그인">소셜 로그인<a href="#소셜-로그인" class="hash-link" aria-label="소셜 로그인에 대한 직접 링크" title="소셜 로그인에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">components/SocialLogin.tsx</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// Google 로그인</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">signInWithOAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  provider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;google&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    redirectTo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://yourapp.com/dashboard&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    scopes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;profile email&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// GitHub 로그인</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">signInWithOAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  provider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;github&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 다중 제공자 지원</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> providers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;google&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;github&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;apple&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;azure&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bitbucket&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;discord&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;facebook&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;figma&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;gitlab&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;linkedin&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;notion&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;slack&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;spotify&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;twitch&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;twitter&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;workos&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="인증-상태-관리">인증 상태 관리<a href="#인증-상태-관리" class="hash-link" aria-label="인증 상태 관리에 대한 직접 링크" title="인증 상태 관리에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">hooks/useAuth.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// React에서 인증 상태 관리</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@supabase/supabase-js&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setUser</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">useState</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name maybe-class-name">User</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator" style="color:#393A34">|</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name keyword null nil" style="color:#00009f">null</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">loading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 초기 세션 가져오기</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getInitialSession</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> session </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">session</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token function" style="color:#d73a49">getInitialSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 인증 상태 변경 리스너</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> subscription </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">onAuthStateChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">session</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">unsubscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> loading </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용 예시</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> loading </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">loading</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Loading</span><span class="token spread operator" style="color:#393A34">...</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">LoginForm</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Dashboard</span><span class="token plain"> user</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-스토리지-storage">4. 스토리지 (Storage)<a href="#4-스토리지-storage" class="hash-link" aria-label="4. 스토리지 (Storage)에 대한 직접 링크" title="4. 스토리지 (Storage)에 대한 직접 링크">​</a></h3>
<p>Supabase Storage는 <strong>S3 호환 객체 스토리지</strong>로, 파일 업로드, 다운로드, 변환 기능을 제공합니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="파일-업로드-및-관리">파일 업로드 및 관리<a href="#파일-업로드-및-관리" class="hash-link" aria-label="파일 업로드 및 관리에 대한 직접 링크" title="파일 업로드 및 관리에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/storage.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// 파일 업로드</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">uploadFile</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">File</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fileExt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fileName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation known-class-name class-name">Date</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">now</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">.</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">fileExt</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> filePath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">uploads/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">fileName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">storage</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;public-files&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">upload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      cacheControl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3600&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      upsert</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Upload error:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 업로드된 파일의 공개 URL 가져오기</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> publicUrl </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">storage</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;public-files&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getPublicUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> publicUrl</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 이미지 변환 및 최적화</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> getOptimizedImageUrl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  width</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  height</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  quality</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  format</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;webp&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;jpeg&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;png&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">storage</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;images&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getPublicUrl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      transform</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">800</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        resize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cover&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        format</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">format</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;webp&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        quality</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">quality</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">publicUrl</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 파일 다운로드</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">downloadFile</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">storage</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;private-files&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">download</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Download error:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Blob을 URL로 변환</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">URL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createObjectURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> url</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 파일 삭제</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">deleteFile</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">storage</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;public-files&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">error</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="보안-및-권한-관리">보안 및 권한 관리<a href="#보안-및-권한-관리" class="hash-link" aria-label="보안 및 권한 관리에 대한 직접 링크" title="보안 및 권한 관리에 대한 직접 링크">​</a></h4>
<div class="language-sql codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">스토리지 RLS 정책</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">-- 스토리지 RLS 정책 설정</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 사용자는 자신의 폴더에만 업로드 가능</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Users can upload to own folder&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objects</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CHECK</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  bucket_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user-files&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">::</span><span class="token keyword" style="color:#00009f">text</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">foldername</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 사용자는 자신의 파일만 볼 수 있음</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Users can view own files&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">objects</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  bucket_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;user-files&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">::</span><span class="token keyword" style="color:#00009f">text</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">foldername</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-edge-functions">5. Edge Functions<a href="#5-edge-functions" class="hash-link" aria-label="5. Edge Functions에 대한 직접 링크" title="5. Edge Functions에 대한 직접 링크">​</a></h3>
<p>Supabase Edge Functions는 <strong>Deno 런타임</strong>을 기반으로 하는 서버리스 함수로, 전 세계 엣지 로케이션에서 실행됩니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="edge-function-예시">Edge Function 예시<a href="#edge-function-예시" class="hash-link" aria-label="Edge Function 예시에 대한 직접 링크" title="Edge Function 예시에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">supabase/functions/send-email/index.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> serve </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://deno.land/std@0.168.0/http/server.ts&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createClient </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://esm.sh/@supabase/supabase-js@2&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> corsHeaders </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&#x27;Access-Control-Allow-Origin&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&#x27;Access-Control-Allow-Headers&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;authorization, x-client-info, apikey, content-type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token function" style="color:#d73a49">serve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">method</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OPTIONS&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;ok&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> corsHeaders </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> to</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> subject</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> html </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 이메일 발송 로직</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://api.resend.com/emails&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&#x27;Authorization&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation maybe-class-name">Deno</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">env</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">get</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;RESEND_API_KEY&#x27;</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token string-property property" style="color:#36acaa">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token keyword module" style="color:#00009f">from</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;noreply@yourapp.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        to</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        subject</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        html</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">corsHeaders</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">corsHeaders</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="클라이언트에서-edge-function-호출">클라이언트에서 Edge Function 호출<a href="#클라이언트에서-edge-function-호출" class="hash-link" aria-label="클라이언트에서 Edge Function 호출에 대한 직접 링크" title="클라이언트에서 Edge Function 호출에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/functions.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// 클라이언트에서 Edge Function 호출</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">sendEmail</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">emailData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  to</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  subject</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  html</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">functions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">invoke</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;send-email&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> emailData</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Function error:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 사용 예시</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleSendWelcomeEmail</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">userEmail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendEmail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    to</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userEmail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    subject</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;환영합니다!&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    html</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">      &lt;h1&gt;안녕하세요, </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">userName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">님!&lt;/h1&gt;</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">      &lt;p&gt;회원가입을 축하드립니다.&lt;/p&gt;</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">    </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;이메일이 성공적으로 발송되었습니다.&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="실제-프로젝트-구현-예시">실제 프로젝트 구현 예시<a href="#실제-프로젝트-구현-예시" class="hash-link" aria-label="실제 프로젝트 구현 예시에 대한 직접 링크" title="실제 프로젝트 구현 예시에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="블로그-플랫폼-구축">블로그 플랫폼 구축<a href="#블로그-플랫폼-구축" class="hash-link" aria-label="블로그 플랫폼 구축에 대한 직접 링크" title="블로그 플랫폼 구축에 대한 직접 링크">​</a></h3>
<p>실제 프로젝트 예시로 Supabase를 활용한 블로그 플랫폼을 구축해보겠습니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="데이터베이스-스키마-설계">데이터베이스 스키마 설계<a href="#데이터베이스-스키마-설계" class="hash-link" aria-label="데이터베이스 스키마 설계에 대한 직접 링크" title="데이터베이스 스키마 설계에 대한 직접 링크">​</a></h4>
<div class="language-sql codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">database/schema.sql</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">-- 사용자 프로필 테이블</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> profiles </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  id UUID </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">users</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  username </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  full_name </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  bio </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  avatar_url </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  website </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  updated_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 블로그 포스트 테이블</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> posts </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  id UUID </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> gen_random_uuid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  title </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  slug </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  content </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  excerpt </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  featured_image </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  author_id UUID </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> profiles</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  published </span><span class="token keyword" style="color:#00009f">BOOLEAN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">FALSE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  published_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  updated_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 댓글 테이블</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> comments </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  id UUID </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> gen_random_uuid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  post_id UUID </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  author_id UUID </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> profiles</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  content </span><span class="token keyword" style="color:#00009f">TEXT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 좋아요 테이블</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> likes </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  id UUID </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> gen_random_uuid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  post_id UUID </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  user_id UUID </span><span class="token keyword" style="color:#00009f">REFERENCES</span><span class="token plain"> profiles</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DELETE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  created_at </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token plain"> ZONE </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- RLS 정책 설정</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> profiles </span><span class="token keyword" style="color:#00009f">ENABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ROW</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LEVEL</span><span class="token plain"> SECURITY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> posts </span><span class="token keyword" style="color:#00009f">ENABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ROW</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LEVEL</span><span class="token plain"> SECURITY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> comments </span><span class="token keyword" style="color:#00009f">ENABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ROW</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LEVEL</span><span class="token plain"> SECURITY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> likes </span><span class="token keyword" style="color:#00009f">ENABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ROW</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LEVEL</span><span class="token plain"> SECURITY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 프로필 정책</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Public profiles are viewable by everyone&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> profiles</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Users can update own profile&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> profiles</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 포스트 정책</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Published posts are viewable by everyone&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">published </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Authors can view own posts&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> author_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Authors can create posts&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CHECK</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> author_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> POLICY </span><span class="token string" style="color:#e3116c">&quot;Authors can update own posts&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">uid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> author_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="react-컴포넌트-구현">React 컴포넌트 구현<a href="#react-컴포넌트-구현" class="hash-link" aria-label="React 컴포넌트 구현에 대한 직접 링크" title="React 컴포넌트 구현에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">types/database.types.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// types/database.types.ts</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Profile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  full_name</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  bio</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  avatar_url</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  website</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Post</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  slug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  excerpt</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  featured_image</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  author_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  published</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  published_at</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  created_at</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  updated_at</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  profiles</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Profile</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  likes_count</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  comments_count</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">hooks/usePosts.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// hooks/usePosts.ts</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> supabase </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../lib/supabase&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">usePosts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">posts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setPosts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">useState</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name maybe-class-name">Post</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">[</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">]</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">loading</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLoading</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fetchPosts</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">          *,</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">          profiles (username, full_name, avatar_url),</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">          likes (count),</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">          comments (count)</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">        </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;published&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;published_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ascending</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error fetching posts:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setPosts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLoading</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchPosts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 실시간 구독</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">channel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;public:posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;postgres_changes&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        table</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        filter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;published=eq.true&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token function" style="color:#d73a49">fetchPosts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 변경사항 발생 시 다시 fetch</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">unsubscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> loading </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">components/PostCard.tsx</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// components/PostCard.tsx</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PostCardProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Post</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">PostCard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> post </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PostCardProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">liked</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLiked</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">likesCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLikesCount</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">likes_count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleLike</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> user </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">liked</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 좋아요 취소</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;likes&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;post_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;user_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLiked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLikesCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prev </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> prev </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 좋아요 추가</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;likes&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> post_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLiked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setLikesCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prev </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> prev </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">article className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;bg-white rounded-lg shadow-md overflow-hidden&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">featured_image</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          src</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">featured_image</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          alt</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;w-full h-48 object-cover&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;p-6&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">h2 className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;text-xl font-bold mb-2&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> href</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/posts/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">post</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">slug</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Link</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">excerpt</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;text-gray-600 mb-4&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">excerpt</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;flex items-center justify-between&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;flex items-center space-x-2&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">              src</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">profiles</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">avatar_url </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/default-avatar.png&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">              alt</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">profiles</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">              className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;w-8 h-8 rounded-full&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;text-sm text-gray-700&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">profiles</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">full_name </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">profiles</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">handleLike</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            className</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">flex items-center space-x-1 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string interpolation">              liked </span><span class="token template-string interpolation operator" style="color:#393A34">?</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;text-red-500&#x27;</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator" style="color:#393A34">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;text-gray-500&#x27;</span><span class="token template-string interpolation"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string interpolation">            </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">HeartIcon</span><span class="token plain"> className</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;w-5 h-5&quot;</span><span class="token plain"> fill</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">liked </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;currentColor&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;none&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">likesCount</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">span</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">article</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="성능-최적화-전략">성능 최적화 전략<a href="#성능-최적화-전략" class="hash-link" aria-label="성능 최적화 전략에 대한 직접 링크" title="성능 최적화 전략에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="데이터베이스-최적화">데이터베이스 최적화<a href="#데이터베이스-최적화" class="hash-link" aria-label="데이터베이스 최적화에 대한 직접 링크" title="데이터베이스 최적화에 대한 직접 링크">​</a></h3>
<div class="language-sql codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">database/indexes.sql</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-sql codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">-- 성능 최적화를 위한 인덱스 생성</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_posts_author_published </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">author_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> published</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_posts_published_at </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">published_at </span><span class="token keyword" style="color:#00009f">DESC</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> published </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_posts_slug </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">slug</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_comments_post_id </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> comments</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_likes_post_user </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> likes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 전문 검색을 위한 인덱스</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> idx_posts_search </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posts </span><span class="token keyword" style="color:#00009f">USING</span><span class="token plain"> gin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">to_tsvector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;english&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> title </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="쿼리-최적화">쿼리 최적화<a href="#쿼리-최적화" class="hash-link" aria-label="쿼리 최적화에 대한 직접 링크" title="쿼리 최적화에 대한 직접 링크">​</a></h3>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/optimized-queries.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// 페이지네이션과 함께 최적화된 쿼리</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getPostsWithPagination</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> limit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> limit</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> count </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">      id, title, excerpt, published_at, slug,</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">      profiles!inner(username, avatar_url)</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token template-string string" style="color:#e3116c">    </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;exact&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;published&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;published_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ascending</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offset </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> limit </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    totalCount</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    totalPages</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">ceil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> limit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    currentPage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> page</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 캐싱을 활용한 최적화</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> unstable_cache </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next/cache&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> getCachedPosts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">unstable_cache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;published&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;published_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ascending</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;featured-posts&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    revalidate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 5분 캐시</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="장점과-한계">장점과 한계<a href="#장점과-한계" class="hash-link" aria-label="장점과 한계에 대한 직접 링크" title="장점과 한계에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="supabase의-주요-장점">Supabase의 주요 장점<a href="#supabase의-주요-장점" class="hash-link" aria-label="Supabase의 주요 장점에 대한 직접 링크" title="Supabase의 주요 장점에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-개발-생산성">1. <strong>개발 생산성</strong><a href="#1-개발-생산성" class="hash-link" aria-label="1-개발-생산성에 대한 직접 링크" title="1-개발-생산성에 대한 직접 링크">​</a></h4>
<ul>
<li><strong>즉시 사용 가능한 백엔드</strong>: 복잡한 서버 설정 없이 바로 개발 시작</li>
<li><strong>통합된 도구</strong>: 데이터베이스, 인증, 스토리지, 함수를 한 곳에서 관리</li>
<li><strong>직관적인 대시보드</strong>: 비개발자도 쉽게 이해할 수 있는 관리 인터페이스</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-기술적-우수성">2. <strong>기술적 우수성</strong><a href="#2-기술적-우수성" class="hash-link" aria-label="2-기술적-우수성에 대한 직접 링크" title="2-기술적-우수성에 대한 직접 링크">​</a></h4>
<ul>
<li><strong>PostgreSQL의 강력함</strong>: 복잡한 쿼리, 트랜잭션, ACID 보장</li>
<li><strong>실시간 성능</strong>: WebSocket 기반의 빠른 실시간 업데이트</li>
<li><strong>확장성</strong>: 수평적, 수직적 확장 모두 지원</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-개발자-경험">3. <strong>개발자 경험</strong><a href="#3-개발자-경험" class="hash-link" aria-label="3-개발자-경험에 대한 직접 링크" title="3-개발자-경험에 대한 직접 링크">​</a></h4>
<ul>
<li><strong>타입 안전성</strong>: TypeScript 완벽 지원으로 컴파일 타임 에러 방지</li>
<li><strong>자동 API 생성</strong>: 데이터베이스 스키마 기반 REST API 자동 생성</li>
<li><strong>풍부한 생태계</strong>: React, Vue, Svelte, Flutter 등 다양한 프레임워크 지원</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="현재의-한계점">현재의 한계점<a href="#현재의-한계점" class="hash-link" aria-label="현재의 한계점에 대한 직접 링크" title="현재의 한계점에 대한 직접 링크">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>고려해야 할 제한사항</div><div class="admonitionContent_BuS1"><p>Supabase는 강력한 플랫폼이지만, 특정 상황에서는 제약이 있을 수 있습니다.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-복잡한-비즈니스-로직">1. <strong>복잡한 비즈니스 로직</strong><a href="#1-복잡한-비즈니스-로직" class="hash-link" aria-label="1-복잡한-비즈니스-로직에 대한 직접 링크" title="1-복잡한-비즈니스-로직에 대한 직접 링크">​</a></h4>
<ul>
<li>Edge Functions의 기능이 AWS Lambda나 Google Cloud Functions 대비 제한적</li>
<li>복잡한 백엔드 로직은 여전히 별도 서버가 필요할 수 있음</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-대용량-데이터-처리">2. <strong>대용량 데이터 처리</strong><a href="#2-대용량-데이터-처리" class="hash-link" aria-label="2-대용량-데이터-처리에 대한 직접 링크" title="2-대용량-데이터-처리에 대한 직접 링크">​</a></h4>
<ul>
<li>매우 큰 규모의 데이터 분석이나 ETL 작업에는 전문 도구가 더 적합</li>
<li>복잡한 데이터 파이프라인 구축에는 추가 도구 필요</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-특수한-요구사항">3. <strong>특수한 요구사항</strong><a href="#3-특수한-요구사항" class="hash-link" aria-label="3-특수한-요구사항에 대한 직접 링크" title="3-특수한-요구사항에 대한 직접 링크">​</a></h4>
<ul>
<li>특정 규정 준수나 보안 요구사항이 있는 엔터프라이즈 환경</li>
<li>기존 레거시 시스템과의 복잡한 통합</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="가격-정책과-확장성">가격 정책과 확장성<a href="#가격-정책과-확장성" class="hash-link" aria-label="가격 정책과 확장성에 대한 직접 링크" title="가격 정책과 확장성에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="요금-구조">요금 구조<a href="#요금-구조" class="hash-link" aria-label="요금 구조에 대한 직접 링크" title="요금 구조에 대한 직접 링크">​</a></h3>
<p>Supabase는 <strong>사용량 기반 요금 정책</strong>을 채택하여 스타트업부터 대기업까지 합리적인 비용으로 이용할 수 있습니다.</p>
<table><thead><tr><th>플랜</th><th>월 요금</th><th>주요 특징</th></tr></thead><tbody><tr><td><strong>Free</strong></td><td>$0</td><td>• 2개 프로젝트<br>• 500MB 데이터베이스<br>• 1GB 스토리지<br>• 50MB Edge Functions</td></tr><tr><td><strong>Pro</strong></td><td>$25</td><td>• 무제한 프로젝트<br>• 8GB 데이터베이스<br>• 100GB 스토리지<br>• 2GB Edge Functions</td></tr><tr><td><strong>Team</strong></td><td>$599</td><td>• 팀 협업 기능<br>• 우선 지원<br>• 고급 보안 기능</td></tr><tr><td><strong>Enterprise</strong></td><td>별도 문의</td><td>• 전용 지원<br>• SLA 보장<br>• 커스텀 보안 정책</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="확장성-전략">확장성 전략<a href="#확장성-전략" class="hash-link" aria-label="확장성 전략에 대한 직접 링크" title="확장성 전략에 대한 직접 링크">​</a></h3>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/performance.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// 성능 최적화를 위한 실무 팁</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 1. 연결 풀링 최적화</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> supabase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">supabaseUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> supabaseKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  db</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;public&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    autoRefreshToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    persistSession</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    detectSessionInUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  realtime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      eventsPerSecond</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2. 배치 처리 최적화</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">batchInsertPosts</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Post</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> batchSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> batchSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> batch </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> batchSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Batch </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">i </span><span class="token template-string interpolation operator" style="color:#393A34">/</span><span class="token template-string interpolation"> batchSize </span><span class="token template-string interpolation operator" style="color:#393A34">+</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation number" style="color:#36acaa">1</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> failed:</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      results</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> results</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 3. 읽기 전용 복제본 활용</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> readOnlySupabase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SUPABASE_READ_REPLICA_URL</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SUPABASE_ANON_KEY</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getAnalyticsData</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 읽기 전용 복제본에서 분석 쿼리 실행</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> readOnlySupabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;created_at, author_id&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">gte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;created_at&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-01-01&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="실무-도입-가이드">실무 도입 가이드<a href="#실무-도입-가이드" class="hash-link" aria-label="실무 도입 가이드에 대한 직접 링크" title="실무 도입 가이드에 대한 직접 링크">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="프로젝트-시작하기">프로젝트 시작하기<a href="#프로젝트-시작하기" class="hash-link" aria-label="프로젝트 시작하기에 대한 직접 링크" title="프로젝트 시작하기에 대한 직접 링크">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-프로젝트-초기-설정">1. 프로젝트 초기 설정<a href="#1-프로젝트-초기-설정" class="hash-link" aria-label="1. 프로젝트 초기 설정에 대한 직접 링크" title="1. 프로젝트 초기 설정에 대한 직접 링크">​</a></h4>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">프로젝트 설정</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic"># Next.js 프로젝트 생성</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">npx create-next-app@latest my-supabase-app </span><span class="token parameter variable" style="color:#36acaa">--typescript</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--tailwind</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--app</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Supabase 클라이언트 설치</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> @supabase/supabase-js</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 개발 도구 설치</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-D</span><span class="token plain"> @supabase/cli</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 환경변수 설정 (.env.local)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">NEXT_PUBLIC_SUPABASE_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your_supabase_url</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your_supabase_anon_key</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">SUPABASE_SERVICE_ROLE_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your_service_role_key</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-supabase-클라이언트-설정">2. Supabase 클라이언트 설정<a href="#2-supabase-클라이언트-설정" class="hash-link" aria-label="2. Supabase 클라이언트 설정에 대한 직접 링크" title="2. Supabase 클라이언트 설정에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/supabase.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createClient </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@supabase/supabase-js&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> supabaseUrl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NEXT_PUBLIC_SUPABASE_URL</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> supabaseAnonKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> supabase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">supabaseUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> supabaseAnonKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 서버사이드용 클라이언트 (관리자 권한)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> supabaseAdmin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  supabaseUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SUPABASE_SERVICE_ROLE_KEY</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      autoRefreshToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      persistSession</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="마이그레이션-전략">마이그레이션 전략<a href="#마이그레이션-전략" class="hash-link" aria-label="마이그레이션 전략에 대한 직접 링크" title="마이그레이션 전략에 대한 직접 링크">​</a></h3>
<p>기존 Firebase 프로젝트에서 Supabase로 마이그레이션하는 경우의 전략입니다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-데이터-마이그레이션">1. 데이터 마이그레이션<a href="#1-데이터-마이그레이션" class="hash-link" aria-label="1. 데이터 마이그레이션에 대한 직접 링크" title="1. 데이터 마이그레이션에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">scripts/migrate-firebase.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// Firebase에서 Supabase로 데이터 마이그레이션</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> initializeApp </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;firebase/app&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> getFirestore</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> collection</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> getDocs </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;firebase/firestore&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> supabaseAdmin </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./lib/supabase&#x27;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">migrateFirestoreToSupabase</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Firebase 초기화</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> firebaseApp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initializeApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">firebaseConfig</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> db </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFirestore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">firebaseApp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Firestore 데이터 가져오기</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> postsSnapshot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getDocs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">collection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">db</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> posts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> postsSnapshot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">docs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Supabase에 데이터 삽입</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> posts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabaseAdmin</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        author_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">authorId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        created_at</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">createdAt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toISOString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Migration error:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-점진적-마이그레이션">2. 점진적 마이그레이션<a href="#2-점진적-마이그레이션" class="hash-link" aria-label="2. 점진적 마이그레이션에 대한 직접 링크" title="2. 점진적 마이그레이션에 대한 직접 링크">​</a></h4>
<div class="language-typescript codeBlockContainer_APcc theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_P25_">lib/hybrid-data.ts</div><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-typescript codeBlock_qGQc thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_p187 codeBlockLinesWithNumbering_OFgW"><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token comment" style="color:#999988;font-style:italic">// 하이브리드 접근: Firebase와 Supabase 동시 사용</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useHybridData</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fetchData</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 우선 Supabase에서 시도</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> supabaseData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> supabase</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;posts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">supabaseData</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Supabase에 데이터가 없으면 Firebase에서 가져오기</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> firebaseData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFirebaseData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">firebaseData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">supabaseData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span></span><br></span><span class="token-line codeLine_iPqp" style="color:#393A34"><span class="codeLineNumber_F4P7"></span><span class="codeLineContent_pOih"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a href="#결론" class="hash-link" aria-label="결론에 대한 직접 링크" title="결론에 대한 직접 링크">​</a></h2>
<p>Supabase는 <strong>PostgreSQL의 강력함과 NoSQL의 편의성</strong>을 결합한 혁신적인 백엔드 플랫폼으로, 현대 웹 애플리케이션 개발에 새로운 패러다임을 제시하고 있습니다. 특히 <strong>오픈소스 철학</strong>을 바탕으로 한 투명성과 <strong>개발자 중심의 경험</strong>은 Firebase의 훌륭한 대안이 되고 있습니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="주요-성과">주요 성과<a href="#주요-성과" class="hash-link" aria-label="주요 성과에 대한 직접 링크" title="주요 성과에 대한 직접 링크">​</a></h3>
<ul>
<li><strong>2백만 명 이상의 개발자</strong> 커뮤니티 형성</li>
<li><strong>Fortune 500 기업들의 도입</strong> 증가</li>
<li><strong>지속적인 기능 업데이트</strong>와 성능 개선</li>
<li><strong>강력한 생태계</strong>와 써드파티 통합</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="supabase를-선택해야-하는-경우">Supabase를 선택해야 하는 경우<a href="#supabase를-선택해야-하는-경우" class="hash-link" aria-label="Supabase를 선택해야 하는 경우에 대한 직접 링크" title="Supabase를 선택해야 하는 경우에 대한 직접 링크">​</a></h3>
<ul>
<li><strong>관계형 데이터베이스의 강력함</strong>이 필요한 프로젝트</li>
<li><strong>빠른 프로토타이핑</strong>과 MVP 개발</li>
<li><strong>오픈소스 솔루션</strong>을 선호하는 조직</li>
<li><strong>벤더 락인을 피하고 싶은</strong> 경우</li>
<li><strong>SQL 숙련도가 있는</strong> 개발팀</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="미래-전망">미래 전망<a href="#미래-전망" class="hash-link" aria-label="미래 전망에 대한 직접 링크" title="미래 전망에 대한 직접 링크">​</a></h3>
<p>Supabase는 단순한 백엔드 서비스를 넘어서 <strong>개발자 플랫폼</strong>으로 진화하고 있습니다. AI 기능 통합, 더 강력한 Edge Computing, 그리고 기업용 기능 강화를 통해 앞으로도 지속적인 성장이 예상됩니다.</p>
<p>모든 프로젝트에 완벽한 솔루션은 없지만, Supabase는 <strong>현대적인 웹 애플리케이션 개발</strong>에 있어서 가장 균형 잡힌 선택지 중 하나입니다. 특히 개발 속도와 확장성, 그리고 개발자 경험을 모두 고려했을 때 매우 경쟁력 있는 플랫폼입니다.</p>
<hr>
<p><strong>참고 자료</strong></p>
<ul>
<li><a href="https://supabase.com/docs" target="_blank" rel="noopener noreferrer">Supabase 공식 문서</a></li>
<li><a href="https://www.postgresql.org/docs/" target="_blank" rel="noopener noreferrer">PostgreSQL 공식 문서</a></li>
<li><a href="https://github.com/supabase/supabase" target="_blank" rel="noopener noreferrer">Supabase GitHub Repository</a></li>
<li><a href="https://supabase.com/alternatives/supabase-vs-firebase" target="_blank" rel="noopener noreferrer">Supabase vs Firebase 비교 분석</a></li>
</ul></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/supabase">supabase</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/firebase">firebase</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/postgresql">postgresql</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/backend">backend</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/database">database</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/realtime">realtime</a></li></ul></div></div></footer></article></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="블로그 게시물 탐색"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/csharp-thread-parallel-foreach-safe-cancellation"><div class="pagination-nav__sublabel">이전 게시물</div><div class="pagination-nav__label">C#에서 Thread와 Parallel.ForEach 안전하게 중단하는 방법</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/tailwind-css-v4-complete-guide"><div class="pagination-nav__sublabel">다음 게시물</div><div class="pagination-nav__label">Tailwind CSS v4.0 &amp; v4.1 완전 분석: 성능 혁신과 실전 유틸리티</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#supabase란-무엇인가" class="table-of-contents__link toc-highlight">Supabase란 무엇인가?</a><ul><li><a href="#핵심-개념과-철학" class="table-of-contents__link toc-highlight">핵심 개념과 철학</a><ul><li><a href="#supabase의-핵심-철학" class="table-of-contents__link toc-highlight">Supabase의 핵심 철학</a></li></ul></li><li><a href="#firebase와의-차이점" class="table-of-contents__link toc-highlight">Firebase와의 차이점</a></li></ul></li><li><a href="#주요-기능-심화-분석" class="table-of-contents__link toc-highlight">주요 기능 심화 분석</a><ul><li><a href="#1-postgresql-기반-데이터베이스" class="table-of-contents__link toc-highlight">1. PostgreSQL 기반 데이터베이스</a><ul><li><a href="#postgresql의-고급-기능-활용" class="table-of-contents__link toc-highlight">PostgreSQL의 고급 기능 활용</a></li><li><a href="#row-level-security-rls" class="table-of-contents__link toc-highlight">Row Level Security (RLS)</a></li></ul></li><li><a href="#2-실시간-기능-realtime" class="table-of-contents__link toc-highlight">2. 실시간 기능 (Realtime)</a><ul><li><a href="#실시간-구독-구현" class="table-of-contents__link toc-highlight">실시간 구독 구현</a></li></ul></li><li><a href="#3-인증-시스템-auth" class="table-of-contents__link toc-highlight">3. 인증 시스템 (Auth)</a><ul><li><a href="#이메일비밀번호-인증" class="table-of-contents__link toc-highlight">이메일/비밀번호 인증</a></li><li><a href="#소셜-로그인" class="table-of-contents__link toc-highlight">소셜 로그인</a></li><li><a href="#인증-상태-관리" class="table-of-contents__link toc-highlight">인증 상태 관리</a></li></ul></li><li><a href="#4-스토리지-storage" class="table-of-contents__link toc-highlight">4. 스토리지 (Storage)</a><ul><li><a href="#파일-업로드-및-관리" class="table-of-contents__link toc-highlight">파일 업로드 및 관리</a></li><li><a href="#보안-및-권한-관리" class="table-of-contents__link toc-highlight">보안 및 권한 관리</a></li></ul></li><li><a href="#5-edge-functions" class="table-of-contents__link toc-highlight">5. Edge Functions</a><ul><li><a href="#edge-function-예시" class="table-of-contents__link toc-highlight">Edge Function 예시</a></li><li><a href="#클라이언트에서-edge-function-호출" class="table-of-contents__link toc-highlight">클라이언트에서 Edge Function 호출</a></li></ul></li></ul></li><li><a href="#실제-프로젝트-구현-예시" class="table-of-contents__link toc-highlight">실제 프로젝트 구현 예시</a><ul><li><a href="#블로그-플랫폼-구축" class="table-of-contents__link toc-highlight">블로그 플랫폼 구축</a><ul><li><a href="#데이터베이스-스키마-설계" class="table-of-contents__link toc-highlight">데이터베이스 스키마 설계</a></li><li><a href="#react-컴포넌트-구현" class="table-of-contents__link toc-highlight">React 컴포넌트 구현</a></li></ul></li></ul></li><li><a href="#성능-최적화-전략" class="table-of-contents__link toc-highlight">성능 최적화 전략</a><ul><li><a href="#데이터베이스-최적화" class="table-of-contents__link toc-highlight">데이터베이스 최적화</a></li><li><a href="#쿼리-최적화" class="table-of-contents__link toc-highlight">쿼리 최적화</a></li></ul></li><li><a href="#장점과-한계" class="table-of-contents__link toc-highlight">장점과 한계</a><ul><li><a href="#supabase의-주요-장점" class="table-of-contents__link toc-highlight">Supabase의 주요 장점</a><ul><li><a href="#1-개발-생산성" class="table-of-contents__link toc-highlight">1. <strong>개발 생산성</strong></a></li><li><a href="#2-기술적-우수성" class="table-of-contents__link toc-highlight">2. <strong>기술적 우수성</strong></a></li><li><a href="#3-개발자-경험" class="table-of-contents__link toc-highlight">3. <strong>개발자 경험</strong></a></li></ul></li><li><a href="#현재의-한계점" class="table-of-contents__link toc-highlight">현재의 한계점</a><ul><li><a href="#1-복잡한-비즈니스-로직" class="table-of-contents__link toc-highlight">1. <strong>복잡한 비즈니스 로직</strong></a></li><li><a href="#2-대용량-데이터-처리" class="table-of-contents__link toc-highlight">2. <strong>대용량 데이터 처리</strong></a></li><li><a href="#3-특수한-요구사항" class="table-of-contents__link toc-highlight">3. <strong>특수한 요구사항</strong></a></li></ul></li></ul></li><li><a href="#가격-정책과-확장성" class="table-of-contents__link toc-highlight">가격 정책과 확장성</a><ul><li><a href="#요금-구조" class="table-of-contents__link toc-highlight">요금 구조</a></li><li><a href="#확장성-전략" class="table-of-contents__link toc-highlight">확장성 전략</a></li></ul></li><li><a href="#실무-도입-가이드" class="table-of-contents__link toc-highlight">실무 도입 가이드</a><ul><li><a href="#프로젝트-시작하기" class="table-of-contents__link toc-highlight">프로젝트 시작하기</a><ul><li><a href="#1-프로젝트-초기-설정" class="table-of-contents__link toc-highlight">1. 프로젝트 초기 설정</a></li><li><a href="#2-supabase-클라이언트-설정" class="table-of-contents__link toc-highlight">2. Supabase 클라이언트 설정</a></li></ul></li><li><a href="#마이그레이션-전략" class="table-of-contents__link toc-highlight">마이그레이션 전략</a><ul><li><a href="#1-데이터-마이그레이션" class="table-of-contents__link toc-highlight">1. 데이터 마이그레이션</a></li><li><a href="#2-점진적-마이그레이션" class="table-of-contents__link toc-highlight">2. 점진적 마이그레이션</a></li></ul></li></ul></li><li><a href="#결론" class="table-of-contents__link toc-highlight">결론</a><ul><li><a href="#주요-성과" class="table-of-contents__link toc-highlight">주요 성과</a></li><li><a href="#supabase를-선택해야-하는-경우" class="table-of-contents__link toc-highlight">Supabase를 선택해야 하는 경우</a></li><li><a href="#미래-전망" class="table-of-contents__link toc-highlight">미래 전망</a></li></ul></li></ul></div></div></div></div></div><footer class="footer modernFooter_bE7m footer--dark"><div class="container container-fluid"><div class="footerContent_BnVP"><div class="footerTop_BwM_"><div class="row footer__links footerLinksContainer_xHU_"><div class="col footer__col footerColumn_Rd47"><div class="footer__title footerTitle_ttsn"><span class="titleIcon_KXnT">📚</span>콘텐츠</div><ul class="footer__items clean-list footerItems_HcDV"><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/blog">블로그</a></li><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/blog/tags">태그</a></li><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/bio">소개</a></li></ul></div><div class="col footer__col footerColumn_Rd47"><div class="footer__title footerTitle_ttsn"><span class="titleIcon_KXnT">📧</span>Contact</div><ul class="footer__items clean-list footerItems_HcDV"><li class="footer__item footerItem_mNRN"><a href="https://github.com/jeongyong-park" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item footerItem_mNRN"><a href="https://twitter.com/chisquare88" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item footerItem_mNRN"><a href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="col footer__col footerColumn_Rd47"><div class="footer__title footerTitle_ttsn"><span class="titleIcon_KXnT">🔗</span>More</div><ul class="footer__items clean-list footerItems_HcDV"><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/blog/rss.xml">RSS Feed</a></li><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/blog/atom.xml">Atom Feed</a></li><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/blog/feed.json">JSON Feed</a></li><li class="footer__item footerItem_mNRN"><a class="footer__link-item" href="/privacy">Privacy Policy</a></li><li class="footer__item footerItem_mNRN"><a href="https://github.com/jeongyong-park/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div><div class="footerBottom_eWW_"><div class="footerBottomContent_BtEc"><div class="socialLinks_LjiY"><a href="https://github.com/jeongyong-park" target="_blank" rel="noopener noreferrer" class="socialLink_r7sO" aria-label="GitHub"><svg viewBox="0 0 24 24" class="socialIcon_la_w"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a><a href="https://twitter.com/chisquare88" target="_blank" rel="noopener noreferrer" class="socialLink_r7sO" aria-label="Twitter"><svg viewBox="0 0 24 24" class="socialIcon_la_w"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a href="/blog/rss.xml" target="_blank" rel="noopener noreferrer" class="socialLink_r7sO" aria-label="RSS Feed"><svg viewBox="0 0 24 24" class="socialIcon_la_w"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"></path></svg></a></div></div><div class="copyrightSection_UuaS"><div class="divider_thwu"></div><div class="copyrightContent_d5m_"><div class="copyrightContainer_d0wp"><div class="copyrightText_x8w8">Copyright © 2025 쌍팔년생 개발자</div><div class="copyrightExtra_gr4c"><span class="heartIcon_JMRM">❤️</span><span class="madeWithLove_EWlM">Made with love in Seoul, Korea</span></div></div><div class="builtWith_NfvX">Built with ❤️ using<!-- --> <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="docusaurusLink_eJ2l">Docusaurus</a></div></div></div></div></div></div></footer></div><script>document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("main")||document.querySelector('[role="main"]')||document.querySelector(".main-wrapper")||document.querySelector("article");e&&!e.id&&(e.id="main-content",e.setAttribute("tabindex","-1"));const t=document.querySelector(".skipToContent");t&&t.addEventListener("click",(function(e){e.preventDefault();const t=document.getElementById("main-content");t&&(t.focus(),t.scrollIntoView({behavior:"smooth",block:"start"}))}))}))</script></div>
</body>
</html>