"use strict";(self.webpackChunkjeongyong_park_github_io=self.webpackChunkjeongyong_park_github_io||[]).push([["5934"],{9198:function(n,e,t){t.r(e),t.d(e,{assets:function(){return s},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return i},metadata:function(){return r},toc:function(){return c}});var r=t(1642),a=t(5893),o=t(65);let i={title:"C#\uC5D0\uC11C Thread\uB0B4\uC5D0 Parallel.Foreach \uAC00 \uC788\uB294 \uACBD\uC6B0 \uC911\uB2E8 \uBC29\uBC95",description:"C#\uC5D0\uC11C Thread\uB0B4\uC5D0 Parallel.Foreach \uAC00 \uC788\uB294 \uACBD\uC6B0 \uC911\uB2E8 \uBC29\uBC95",authors:["jypark"],tags:["dotnet"],image:"csharp.png",hide_table_of_contents:!1},l=void 0,s={authorsImageUrls:[void 0]},c=[{value:"\uBA54\uC778 \uD074\uB798\uC2A4 \uBC0F \uC911\uB2E8 \uD074\uB798\uC2A4",id:"\uBA54\uC778-\uD074\uB798\uC2A4-\uBC0F-\uC911\uB2E8-\uD074\uB798\uC2A4",level:3},{value:"\uC2DC\uAC04\uC774 \uC624\uB798\uAC78\uB9AC\uB294 \uC791\uC5C5 \uD074\uB798\uC2A4",id:"\uC2DC\uAC04\uC774-\uC624\uB798\uAC78\uB9AC\uB294-\uC791\uC5C5-\uD074\uB798\uC2A4",level:3}];function u(n){let e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...(0,o.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"GUI \uD658\uACBD\uC5D0\uC11C \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uB294 \uB4F1\uC758 \uC774\uBCA4\uD2B8\uB85C \uC2DC\uAC04\uC774 \uC624\uB798 \uAC78\uB9AC\uB294 \uC791\uC5C5\uC744 \uAD6C\uB3D9\uD558\uB294 \uACBD\uC6B0 \uC2A4\uB808\uB4DC\uB97C \uBD84\uB9AC\uD558\uC5EC \uAC1C\uBC1C\uD558\uB294 \uBC29\uBC95\uC774 \uC88B\uB2E4\uB294 \uBC29\uBC95\uC740 C# \uBFD0\uB9CC \uC544\uB2C8\uB77C \uC548\uB4DC\uB85C\uC774\uB4DC\uB098 MFC \uB4F1 GUI\uB97C \uC5B4\uB290 \uC815\uB3C4 \uAC1C\uBC1C\uD55C \uC0AC\uB78C\uC774\uB77C\uBA74 \uC775\uC219\uD558\uB9AC\uB77C \uC0DD\uAC01\uD55C\uB2E4."}),"\n",(0,a.jsx)(e.p,{children:"\uADF8\uB807\uB2E4\uBA74 \uADF8 \uC2DC\uAC04\uC774 \uC624\uB798 \uAC78\uB9AC\uB294 \uC791\uC5C5\uC744 \uB354\uC6B1\uB354 \uBE60\uB974\uAC8C \uD558\uACE0 \uC2F6\uB2E4\uBA74 \uBCD1\uB82C \uCC98\uB9AC\uAC00 \uAC00\uC7A5 \uC27D\uACE0 \uBE68\uB9AC \uC801\uC6A9\uD560 \uC218 \uC788\uB294 \uD569\uB9AC\uC801\uC778 \uBC29\uBC95\uC774\uB77C\uACE0 \uC0DD\uAC01\uD55C\uB2E4."}),"\n",(0,a.jsx)(e.p,{children:'\uAD6C\uAE00\uB9C1\uC744 \uD1B5\uD558\uC5EC \uC5B4\uCC0C\uC5B4\uCC0C \uBCD1\uB82C For \uBB38\uC744 \uC801\uC6A9\uD558\uC600\uC9C0\uB9CC, \uBB38\uC81C\uB294 "\uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uAD6C\uB3D9\uC740 \uD588\uC9C0\uB9CC \uC624\uB798 \uAC78\uB9AC\uB294 \uD504\uB85C\uC138\uC2A4\uB97C \uC791\uC5C5 \uB3C4\uC911\uC5D0 \uC911\uB2E8\uD558\uACE0 \uC2F6\uB2E4"\uB77C\uACE0 \uB9D0\uD588\uC744 \uB54C \uBC1C\uC0DD\uD558\uC600\uB2E4.'}),"\n",(0,a.jsx)(e.p,{children:"\uB2E4\uC74C\uC740 \uBA87 \uAC00\uC9C0 \uCF54\uB4DC\uB97C \uC870\uD569\uD558\uC5EC \uB9CC\uB4E0 \uBA54\uC778 \uC2A4\uB808\uB4DC\uC640 \uBD84\uB9AC\uB41C \uB2E4\uC911 \uD3EC\uBB38 \uC791\uC5C5 \uD074\uB798\uC2A4\uC640 \uADF8 \uC791\uC5C5\uC744 \uC911\uB2E8\uC2DC\uD0A4\uB294 \uC608\uB97C \uCF58\uC194 \uC751\uC6A9\uD504\uB85C\uADF8\uB7A8\uC73C\uB85C \uAD6C\uC131\uD558\uC600\uB2E4."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\uD575\uC2EC \uAC1C\uB150:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Thread"}),": UI \uC2A4\uB808\uB4DC\uC640 \uBD84\uB9AC\uB41C \uBC31\uADF8\uB77C\uC6B4\uB4DC \uC791\uC5C5"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Parallel.ForEach"}),": \uBCD1\uB82C \uCC98\uB9AC\uB97C \uD1B5\uD55C \uC131\uB2A5 \uD5A5\uC0C1"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"CancellationToken"}),": \uC548\uC804\uD55C \uC791\uC5C5 \uC911\uB2E8 \uBA54\uCEE4\uB2C8\uC998"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\uC8FC\uC758\uC0AC\uD56D:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"Thread.Abort()"}),"\uB294 .NET Core/.NET 5+\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC73C\uBBC0\uB85C CancellationToken \uC0AC\uC6A9\uC744 \uAD8C\uC7A5"]}),"\n",(0,a.jsx)(e.li,{children:"\uBCD1\uB82C \uC791\uC5C5 \uC911\uB2E8 \uC2DC \uBAA8\uB4E0 \uC2A4\uB808\uB4DC\uAC00 \uC548\uC804\uD558\uAC8C \uC815\uB9AC\uB418\uB3C4\uB85D \uD574\uC57C \uD568"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.sup,{children:(0,a.jsx)(e.a,{href:"#user-content-fn-1-afd254",id:"user-content-fnref-1-afd254","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})}),"\n",(0,a.jsx)(e.h3,{id:"\uBA54\uC778-\uD074\uB798\uC2A4-\uBC0F-\uC911\uB2E8-\uD074\uB798\uC2A4",children:"\uBA54\uC778 \uD074\uB798\uC2A4 \uBC0F \uC911\uB2E8 \uD074\uB798\uC2A4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-csharp",children:'using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading;\nusing System.Threading.Tasks;\n\nnamespace ThreadTest\n{\nclass Program\n{\nstatic void Main(string[] args)\n{\nConsole.WriteLine("press any key for Thread start!");\nConsole.ReadKey();\n\n            RulyCanceler canceler = new RulyCanceler();\n            TestFilter tf = new TestFilter(10000000);\n\n            Thread t = new Thread(() =>\n            {\n                try\n                {\n                    tf.execute(canceler);\n                }catch(OperationCanceledException)\n                {\n                    Console.WriteLine("Canceled!");\n                }\n            });\n            t.Start();\n            Console.ReadKey();\n            Console.WriteLine("Abort!");\n\n            canceler.Cancel();\n            t.Abort();\n            t.Join();\n\n            Console.WriteLine("Aborted!");\n            Console.ReadKey();\n\n        }\n    }\n    public class RulyCanceler\n    {\n        object _cancelLocker = new object();\n        bool _cancelRequest;\n        public bool IsCancellationRequested\n        {\n            get { lock (_cancelLocker) return _cancelRequest; }\n        }\n\n        public void Cancel() { lock (_cancelLocker) _cancelRequest = true; }\n\n        public void ThrowIfCancellationRequested()\n        {\n            if (IsCancellationRequested) throw new OperationCanceledException();\n        }\n    }\n\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"\uC2DC\uAC04\uC774-\uC624\uB798\uAC78\uB9AC\uB294-\uC791\uC5C5-\uD074\uB798\uC2A4",children:"\uC2DC\uAC04\uC774 \uC624\uB798\uAC78\uB9AC\uB294 \uC791\uC5C5 \uD074\uB798\uC2A4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-csharp",children:'using System;\nusing System.Collections.Concurrent;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading;\nusing System.Threading.Tasks;\n\nnamespace ThreadTest\n{\npublic class TestFilter\n{\nprivate long featureCount;\nprivate int MULTI_THREAD_COUNT = 10;\n\n        EventWaitHandle waitEvent = new EventWaitHandle(true, EventResetMode.AutoReset, "SHARED_BY_ALL_PROCESSES");\n        public TestFilter(long featurecount)\n        {\n            this.featureCount = featurecount;\n        }\n\n        public void execute(RulyCanceler cancer)\n        {\n            int workingRangeSize = 1;\n            if (featureCount > 100)\n            {\n                workingRangeSize = (int)(featureCount / MULTI_THREAD_COUNT);\n            }\n            var part = Partitioner.Create(0, featureCount, workingRangeSize);\n            Parallel.ForEach(part, (num, state) =>\n            {\n                for (long featureIdx = num.Item1, cnt = num.Item2; featureIdx < cnt; featureIdx++)\n                {\n                    try\n                    {\n\n                        //waitEvent.WaitOne();(\uD30C\uC77C \uC4F0\uAE30\uBAA8\uB4DC\uC77C \uACBD\uC6B0 \uD558\uB098\uC758 \uC2A4\uB808\uB4DC\uB9CC \uC4F8\uC218 \uC788\uB3C4\uB85D \uC904\uC138\uC6B0\uAE30)\n                        //waitEvent.Set();\n\n                        // \uC911\uB2E8 \uC694\uCCAD\uC774\uC788\uC73C\uBA74 Throw\n                        cancer.ThrowIfCancellationRequested();\n\n                        // \uC2E4\uC81C \uC77C\n                        Console.WriteLine(String.Format("{0} - {1}", num.Item1, featureIdx));\n                    }\n                    catch (OperationCanceledException ex)\n                    {\n                        Console.WriteLine("Breaked.");\n                        Console.WriteLine("Clean");\n                        state.Break();\n                        break;\n\n                    }\n                }\n            });\n        }\n    }\n\n}\n'})}),"\n","\n",(0,a.jsxs)(e.section,{"data-footnotes":!0,className:"footnotes",children:[(0,a.jsx)(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{id:"user-content-fn-1-afd254",children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.a,{href:"http://www.albahari.com/threading/part3.aspx",children:"http://www.albahari.com/threading/part3.aspx"})," ",(0,a.jsx)(e.a,{href:"#user-content-fnref-1-afd254","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21A9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function d(n={}){let{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(u,{...n})}):u(n)}},65:function(n,e,t){t.d(e,{Z:function(){return l},a:function(){return i}});var r=t(7294);let a={},o=r.createContext(a);function i(n){let e=r.useContext(o);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:i(n.components),r.createElement(o.Provider,{value:e},n.children)}},1642:function(n){n.exports=JSON.parse('{"permalink":"/blog/2017/01/09/post","source":"@site/blog/2017-01-09-post/index.md","title":"C#\uC5D0\uC11C Thread\uB0B4\uC5D0 Parallel.Foreach \uAC00 \uC788\uB294 \uACBD\uC6B0 \uC911\uB2E8 \uBC29\uBC95","description":"C#\uC5D0\uC11C Thread\uB0B4\uC5D0 Parallel.Foreach \uAC00 \uC788\uB294 \uACBD\uC6B0 \uC911\uB2E8 \uBC29\uBC95","date":"2017-01-09T00:00:00.000Z","tags":[{"inline":true,"label":"dotnet","permalink":"/blog/tags/dotnet"}],"readingTime":3.35,"hasTruncateMarker":true,"authors":[{"name":"Jeongyong Park","title":"\uC30D\uD314\uB144\uC0DD \uAC1C\uBC1C\uC790","url":"https://github.com/jeongyong-park","email":"kladess@gmail.com","socials":{"x":"https://x.com/chisquare88","github":"https://github.com/jeongyong-park"},"imageURL":"https://github.com/jeongyong-park.png","key":"jypark","page":null}],"frontMatter":{"title":"C#\uC5D0\uC11C Thread\uB0B4\uC5D0 Parallel.Foreach \uAC00 \uC788\uB294 \uACBD\uC6B0 \uC911\uB2E8 \uBC29\uBC95","description":"C#\uC5D0\uC11C Thread\uB0B4\uC5D0 Parallel.Foreach \uAC00 \uC788\uB294 \uACBD\uC6B0 \uC911\uB2E8 \uBC29\uBC95","authors":["jypark"],"tags":["dotnet"],"image":"csharp.png","hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"Docker\uB97C \uC774\uC6A9\uD558\uC5EC gdal \uC0AC\uC6A9\uD558\uAE30","permalink":"/blog/2021/05/22/post"}}')}}]);